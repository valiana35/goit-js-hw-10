{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst input = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\nconst clockTimer = document.querySelector('.timer');\n\nstartBtn.addEventListener('click', () => {\n    timer.start();\n});\n\nlet userSelectedDate = null;\nlet diff;\n\nclass Timer {\n    constructor({onTick}) {\n        this.intervalId = null;\n        this.onTick = onTick;\n    }\n    start() {\n        if (diff > 0) {\n            days.textContent = addLeadingZero(days);\n            hours.textContent = addLeadingZero(hours);\n            minutes.textContent = addLeadingZero(minutes);\n            seconds.textContent = addLeadingZero(seconds);\n        } else {\n            clearInterval(this.intervalId);\n        }\n        this.intervalId = setInterval(() => {\n            const init = Date.now();\n            const userInit = userSelectedDate.getTime();\n            const diff = userInit - init;\n            const { days, hours, minutes, seconds } = convertMs(diff);\n            this.onTick({ days, hours, minutes, seconds });\n        }, 1000);\n    }\n}\n\nconst timer = new Timer({\n    onTick: updateClockTimer,\n});\n\nfunction updateClockTimer(time) {\n    clockTimer.textContent = `${time.days} ${time.hours} ${time.minutes} ${time.seconds}`;\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n}\n\n     const options = {\n        enableTime: true,\n        time_24hr: true,\n        defaultDate: new Date(),\n        minuteIncrement: 1,\n        onClose(selectedDates) {\n            userSelectedDate = selectedDates[0];\n            if (userSelectedDate < new Date) {\n                iziToast.error({\n                    message: 'Please choose a date in the future',\n                    position: 'topRight',\n                });\n                startBtn.disabled = true;\n            } else {\n                startBtn.disabled = false;\n            }\n          console.log(selectedDates[0]);\n        },\n      };\n\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\n  flatpickr(input, options);\n  \n  console.log(convertMs(2000));\n  console.log(convertMs(140000));\n  console.log(convertMs(24140000));"],"names":["input","startBtn","clockTimer","timer","userSelectedDate","Timer","onTick","init","diff","days","hours","minutes","seconds","convertMs","updateClockTimer","time","options","selectedDates","iziToast","ms","flatpickr"],"mappings":"2FAQA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EAC/C,SAAS,cAAc,aAAa,EACnC,SAAS,cAAc,cAAc,EACnC,SAAS,cAAc,gBAAgB,EACvC,SAAS,cAAc,gBAAgB,EACvD,MAAMC,EAAa,SAAS,cAAc,QAAQ,EAElDD,EAAS,iBAAiB,QAAS,IAAM,CACrCE,EAAM,MAAK,CACf,CAAC,EAED,IAAIC,EAAmB,KAGvB,MAAMC,CAAM,CACR,YAAY,CAAC,OAAAC,CAAM,EAAG,CAClB,KAAK,WAAa,KAClB,KAAK,OAASA,CACjB,CACD,OAAQ,CAOA,cAAc,KAAK,UAAU,EAEjC,KAAK,WAAa,YAAY,IAAM,CAChC,MAAMC,EAAO,KAAK,MAEZC,EADWJ,EAAiB,UACVG,EAClB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAI,EACxD,KAAK,OAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAAE,CAChD,EAAE,GAAI,CACV,CACL,CAEA,MAAMT,EAAQ,IAAIE,EAAM,CACpB,OAAQS,CACZ,CAAC,EAED,SAASA,EAAiBC,EAAM,CAC5Bb,EAAW,YAAc,GAAGa,EAAK,QAAQA,EAAK,SAASA,EAAK,WAAWA,EAAK,SAChF,CAMK,MAAMC,EAAU,CACb,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBb,EAAmBa,EAAc,GAC7Bb,EAAmB,IAAI,MACvBc,EAAS,MAAM,CACX,QAAS,qCACT,SAAU,UAC9B,CAAiB,EACDjB,EAAS,SAAW,IAEpBA,EAAS,SAAW,GAE1B,QAAQ,IAAIgB,EAAc,EAAE,CAC7B,CACT,EAEA,SAASJ,EAAUM,EAAI,CAKnB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAC1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EACpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EACjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEDQ,EAAUpB,EAAOgB,CAAO,EAExB,QAAQ,IAAIH,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}